id: nys_paragraphs_pg_accordion
migration_tags:
  - 'Drupal 7'
  - Content
  - 'Paragraphs Content'
migration_group: nys_pg_group
label: 'Paragraphs Accordion Chapters'

source:
  plugin: d7_paragraphs_item
  bundle: pg_accordion
  key: migrate

destination:
  plugin: 'entity_reference_revisions:paragraph'
  default_bundle: pg_accordion

process:
  type:
    -
      plugin: get
      source: bundle
  field_pg_fc_accordion:
    -
      plugin: sub_process
      source: field_pg_fc_accordion
      process:
        target_id:
          -
            plugin: paragraphs_lookup
            tags: 'Field Collection Content'
            source: value
          -
            plugin: extract
            index:
              - id
        target_revision_id:
          -
            plugin: paragraphs_lookup
            tags:
              - 'Field Collection Revisions Content'
              - 'Field Collection Content'
            tag_ids:
              'Field Collection Revisions Content':
                - revision_id
              'Field Collection Content':
                - value
          -
            plugin: extract
            index:
              - revision_id
