{{ attach_library('nysenate_theme/featured-bills') }}

<div class="c-block c-pg-featured-bills entity entity-paragraphs-item paragraphs-item-pg-featured-bills view-mode-full">
  <!-- theme template: -->
  {% for bill in bills %}
    <div class="c-block c-block-legislation c-block-legislation-featured {% if body %}c-block--half-wrap{% endif %}">
      <div class="c-legislation-info">
        <h3 class="c-bill-num">
          <a href="/legislation/bills/2019/s1500/amendment/d">{{ bill.number }}</a>
        </h3>
        <p class="c-bill-descript">
          {{ bill.description }}
        </p>
        <ul class="nys-bill-status nys-bill-status__drk">
          <hr />
          {% for position in bill.positions %}
            {% if position.is_grouped %}
            <li class="nys-bill-status--assem-sen">
              <ul class="nys-bill-status">
              {% for item in position.items %}
                <li {% if item.is_passed %}class="passed"{% endif %} title="{{ item.text }}">
                  <span class="nys-bill-status--text">{{ item.text }}</span>
                </li>
              {% endfor %}
              </ul>
            </li>
            {% else %}
              <li {% if position.is_passed == true %}class="passed"{% endif %} title="{{ position.text }}">
                <span class="nys-bill-status--text">{{ position.text }}</span>
              </li> 
            {% endif %}
          {% endfor %}
          <li class="spacer"></li>
        </ul>
        <div class="c-bill-update">
          <p class="c-bill-update--date">
            <span class="date-display-single">{{ bill.date }}</span>
          </p>
          <p class="c-bill-update--location">
            <span>
              {{ bill.update_location }}
              {% if bill.committee_link %}
                <a class="committee-link" href="{{ bill.committee_link.url }}">{{ bill.committee_link.text }}</a>
              {% endif %}
            </span>
          </p>
        </div>

        {% if bill.sponsor %}
          <div class="sponsors">
            <span>Sponsored by</span>
            <span>{{ bill.sponsor }}</span>
          </div>
        {% endif %}

        <div class="c-bill-polling med-bg">
          <form class="nys-bill-vote-form nys-bill-vote-form-embedded"
            action="/newsroom/articles/2019/advancing-new-york-values-protecting-taxpayers"
            method="post"
            id="nys-bill-vote-vote-widget-{{ bill.cta_buttons_id }}"
            accept-charset="UTF-8">
            <div>
              <div class="nys-bill-vote form-wrapper"
                id="edit-nys-bill-vote-container-{{ bill.cta_buttons_id }}">
                <input type="hidden" name="nid" value="{{ bill.cta_buttons_id }}" />
                <input type="hidden" name="tid" value="53928" />
                <p class="c-bill-polling--cta">
                  what's your position?
                </p><button class="c-block--btn nys-subscribe-button ajax-processed"
                  value="subscribe"
                  type="submit"
                  id="edit-nys-bill-subscribe-{{ bill.cta_buttons_id }}"
                  name="op">
                  Subscribe
                </button>
                <button class="c-block--btn c-half-btn c-half-btn--left nys-bill-vote-yes ajax-processed"
                  value="yes"
                  type="submit"
                  id="edit-nys-bill-vote-yes-{{ bill.cta_buttons_id }}"
                  name="op">
                  Aye
                </button>
                <button class="c-block--btn c-half-btn c-half-btn--right nys-bill-vote-no ajax-processed"
                  value="no"
                  type="submit"
                  id="edit-nys-bill-vote-no-{{ bill.cta_buttons_id }}"
                  name="op">
                  Nay
                </button>
              </div>
              <input type="hidden"
                name="form_build_id"
                value="form-2gOXX8I3ViFaOvuk_aR1E-XMWDROIJrD67azMp2hBX8" />
              <input type="hidden"
                name="form_token"
                value="AK8DG406363rshaueZ8vUUpz3LxtHdVb6fNkCatsp_k" />
              <input type="hidden"
                name="form_id"
                value="nys_bill_vote_vote_widget" />
            </div>
          </form>
        </div>
      </div>
    </div>
  {% endfor %}

  {% if body %}
    <div class="c-featured-bills-body">
      {{ body }}
    </div>
  {% endif %}
</div>
