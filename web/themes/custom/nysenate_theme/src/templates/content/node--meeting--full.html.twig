{{ attach_library('nysenate_theme/session') }}

<article class="c-block c-meeting-detail--header">
  <div class="c-meeting-detail--meta">
    {% if field_event_status and field_event_status == 'live_now' %}
      <p class="c-meeting-detail--live-flag">
        {{ field_event_status.content }}
      </p>
    {% endif %}
    {% if content.field_off_the_floor[0]['#markup'] == '1' %}
      <p class="c-meeting-detail--floor-flag">
        off the floor
      </p>
    {% endif %}
  </div>

  <div class="c-meeting-detail--overview">
    <div class="c-block">
      <p class="c-meeting-detail--date">
        <span class="c-meeting-date--num">{{ date_value.day }}</span>
        <span class="c-meeting-date--month">{{ date_value.month }}</span>
        <span class="c-meeting-date--year">{{ date_value.year }}</span>
      </p>

      <div class="c-meeting-detail--info">
        <h1 class="c-meeting-detail--title">
          {{ title }}
        </h1>
        {% if content.field_event_place[0]['#markup'] == 'online' %}
          {% if field_event_online_link %}
            <div>
              <a class="c-meeting-detail--location-link" href="field_event_online_link">
                Online Meeting
              </a>
            </div>
          {% elseif field_meeting_location %}
            <div class="c-meeting-detail--location-link">
              Online Meeting
            </div>
          {% endif %}
        {% elseif content.field_event_place[0]['#markup'] == 'cap' %}
          <a class="c-meeting-detail--location-link" href="https://www.google.com/maps/place/New+York+State+Capitol/@42.652602,-73.757388,17z/data=!3m1!4b1!4m2!3m1!1s0x89de0a3aa5dc0b2b:0x72aed557f8df2510" title="NYS Capitol Building" target="_blank">
            NYS Capitol Building
          </a>
        {% elseif content.field_event_place[0]['#markup'] == 'lob' %}
          <a class="c-meeting-detail--location-link" href="https://www.google.com/maps/place/Legislative+Office+Building/@42.6526202,-73.7614498,17z/data=!3m1!4b1!4m5!3m4!1s0x89de0a24d3a304b5:0x1012cb31c839dfe9!8m2!3d42.6526202!4d-73.7592611?hl=en" title="Legislative Office Building" target="_blank">
            Legislative Office Building
          </a>
        {% endif %}

        <div class="c-meeting-detail--location">
          {% if content.field_meeting_location %}
            {{ content.field_meeting_location }}
          {% endif %}
          {% if location %}
            {{ location }}
          {% endif %}
        </div>

        <p class="c-meeting-detail--time">
          {{ date_value.from_time }}
          {% if date_value.from_time != date_value.to_time %}
            to
            {{ date_value.to_time }}
          {% endif %}
          {% if video_status.key != 'streaming_redirect' %}
            <span class="c-meeting-video--status icon-before__youtube">
              {{ video_status.value }}
            </span>
          {% endif %}
        </p>
        {% if calendar_links %}
          {% include '@nysenate_theme/add-to-calendar/add-to-calendar.twig' with {
            calendar_links: calendar_links
          } only %}
        {% endif %}
      </div>
      <div class="c-meeting-detail--descript">
        {% if body %}
          {{ body }}
        {% endif %}
      </div>

      {% if field_chapters %}
        <div class="c-meeting-detail--descript">
          {{ field_chapters }}
        </div>
      {% endif %}

      {% if field_issues %}
        <div class="c-meeting-detail--related">
          <ul>
            <p>
              related issues:
            </p>
            {% if field_majority_issue_tag %}
              <li>{{ field_majority_issue_tag }}</li>
            {% endif %}
            {% for issue in field_issues %}
              <li>{{ issue }}</li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}
    </div>
  </div>

  {% if
    video_status.key == 'streaming_live_now' and content.field_video_redirect %}
    <div class="c-meeting-detail--descript">
      {{ content.field_ustream }}
    </div>
  {% elseif
    video_status.key == 'streaming_redirect' and content.field_video_redirect %}
    {{ content.field_ustream }}
  {% endif %}

  {% if content.field_yt %}
    <div class="c-meeting-detail--descript">
      {% include '@nysenate_theme/video-embed/video-embed.twig' with {
        video: content.field_yt
      } only %}
    </div>
  {% endif %}
</article>
